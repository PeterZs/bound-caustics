<?xml version='1.0' encoding='utf-8'?>

<scene version="0.6.0">
    <default name="lightPosition_x" value="-2.0" />
    <default name="lightPosition_y" value="3.0" />
    <default name="lightPosition_z" value="4.0" />
	<default name="useResultant" value="false" />
	<default name="methodMask" value="0" />
	<default name="distrPath" value=""/>
	<default name="timeout" value="999999"/>
	<default name="spp" value="9999"/>
	<default name="distr_min" value="0.00000001"/>
	<default name="distr_max" value="100"/>
	<default name="spec_var" value="0.0001"/>
	<default name="force_gamma" value="100"/>
	<default name="force_sample" value="0"/>
	<default name="use_max_var" value="true"/>
	<default name="integrator" value="path_cuts_path"/>
	<default name="initialRadius" value="0.014"/>
    <default name="res" value="512"/>
	<default name="timeout" value="999999"/>
    <default name="AR" value="2"/>
    <default name="Am" value="1e-12"/>
    <default name="AM" value="1e3"/>
    <default name="INF_AREA_TOL" value="0.0001"/>
    <default name="u1TOLERATE" value="1.0001"/>
    <default name="U1T" value="1.0001"/>
    <default name="SHADING_NORMAL" value="true"/>
    <default name="SHADING_NORMAL2" value="true"/>
    <default name="CHAIN_TYPE" value="2"/>
    <default name="dump_bound" value="0"/>
	<integrator type="$integrator">
		<integer name="res" value="$res"/>
		<integer name="sampleCount" value="$spp"/>
		<integer name="maxDepth" value="5"/>
		<integer name="rrDepth" value="5"/>
		<boolean name="useResultant" value="$useResultant"/>
		<integer name="methodMask" value="$methodMask"/>
		<integer name="pathcutBounce" value="1"/>
		<integer name="cutoffMatrix" value="16"/>
		<integer name="cutoffResultant" value="100"/>
		<float name="pathcutThres" value="0.00001"/>
        <string name="distrPath" value="$distrPath"/>
        <integer name="maxPasses" value="$spp"/>
		<float name="initialRadius" value="$initialRadius"/>
        <float name="distr_min" value="$distr_min"/>
        <float name="distr_max" value="$distr_max"/>
        <float name="spec_var" value="$spec_var"/>
        <float name="force_gamma" value="$force_gamma"/>
        <integer name="force_sample" value="$force_sample"/>
        <boolean name="use_max_var" value="$use_max_var"/>
		<integer name="timeout" value="$timeout"/>
        <float name="AR" value="$AR"/>
        <float name="Am" value="$Am"/>
        <float name="AM" value="$AM"/>
        <float name="INF_AREA_TOL" value="$INF_AREA_TOL"/>
        <float name="u1TOLERATE" value="$u1TOLERATE"/>
        <float name="U1T" value="$U1T"/>
        <boolean name="SHADING_NORMAL" value="$SHADING_NORMAL"/>
        <boolean name="SHADING_NORMAL2" value="$SHADING_NORMAL2"/>
        <integer name="CHAIN_TYPE" value="$CHAIN_TYPE"/>
        <integer name="dump_bound" value="$dump_bound"/>
        <float name="lightPosition_x" value="$lightPosition_x"/>
        <float name="lightPosition_y" value="$lightPosition_y"/>
        <float name="lightPosition_z" value="$lightPosition_z"/>
        <boolean name="REFRACTION_2D" value="false"/>
	</integrator>

	<emitter type="point">
		<transform name="toWorld">
			<translate x="-2" y="3" z="4"/>
            <!-- <translate x="-1.5" y="0" z="3"/> -->
		</transform>
		<spectrum name="intensity" value="100"/>
	</emitter>  
    <emitter type="envmap">
        <string name="filename" value="textures/sky.exr" />
        <transform name="toWorld">
            <rotate y="1" angle="0" />
        </transform>
        <float name="scale" value="1" />
    </emitter>
    
    <shape type="obj">
        <string name="filename" value="../../data/pool20k.obj" />
        <boolean name="caustic_caster_single" value="true" />
        <boolean name="caustic_caster_multi" value="true" />
        <bsdf type="dielectric">
            <float name="intIOR" value="1.5" />
            <float name="extIOR" value="1.0" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/pool_bottom.obj" />
        <boolean name="caustic_receiver" value="true" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/[2K]Tiles06/Tiles06_col.png" />
                <float name="uscale" value="20"/>
                <float name="vscale" value="20"/>
            </texture>
        </bsdf>
        <transform name="toWorld">
            <!-- <translate y="1" /> -->
        </transform>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/pool_border.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/[2K]Tiles54/Tiles54_col.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/floor1.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/[2K]Tiles27/Tiles27_col.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/floor2.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/[2K]Tiles50/Tiles50_col.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/ladder_steps.obj" />
        <bsdf type="roughplastic">
            <string name="distribution" value="ggx" />
            <float name="alpha" value="0.1" />
            <rgb name="diffuseReflectance" value="0.01, 0.01, 0.04" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/ladder_metal.obj" />
        <bsdf type="roughconductor">
            <string name="distribution" value="ggx" />
            <string name="material" value="Ag" />
            <float name="alpha" value="0.2" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/chairs_wood.obj" />
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.73, 0.58, 0.43" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/chair_fabric_1.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/Striped_cotton_01_2K_Base_Color.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/chair_fabric_2.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/Striped_cotton_01_2K_Base_Color_2.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/umbrella_base.obj" />
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.25, 0.25, 0.25" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/umbrella_cylinders.obj" />
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.03, 0.03, 0.03" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/umbrella_top.obj" />
            <bsdf type="diffuse">
                <texture name="reflectance" type="bitmap">
                    <string name="filename" value="textures/siggraph_logo.png" />
                </texture>
            </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/torus.obj" />
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.8, 0.126, 0.407" />
        </bsdf>
    </shape>
    <sensor type="perspective">
        <string name="fovAxis" value="larger" />
        <float name="fov" value="52" />
        <transform name="toWorld">
            <rotate x="0.0" y="1.0" z="0.0" angle="180.00" />
            <rotate x="1.0" y="0.0" z="0.0" angle="-40.48" />
            <rotate x="0.0" y="1.0" z="0.0" angle="72.56" />
            <rotate x="0.0" y="0.0" z="1.0" angle="0.00" />
            <translate x="13.777025" y="12.458819" z="3.740857" />
        </transform>
        <sampler type="independent">
            <integer name="sampleCount" value="$spp" />
        </sampler>
        <film type="hdrfilm">
            <integer name="width" value="1280" />
            <integer name="height" value="720" />
            <!-- <integer name="cropOffsetY" value="700" />
            <integer name="cropHeight" value="100" /> -->
            
            <rfilter type="box" />
            <boolean name="banner" value="false" />
        </film>
    </sensor>
</scene>