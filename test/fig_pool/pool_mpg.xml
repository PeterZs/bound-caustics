<?xml version='1.0' encoding='utf-8'?>
<scene version="2.0.0">
	<default name="useResultant" value="false" />
	<default name="methodMask" value="0" />
    <default name="spp" value="999999"/>
	<default name="multiEmitter" value="false"/>
	<default name="multiEmitter" value="true"/>
	<default name="train_auto" value="true"/>



    <integrator type="manifold_path_guiding">
		<integer name="samples_per_pass" value="1"/>
		<boolean name="train_auto" value="$train_auto" />
		<integer name="sms_bounce_force" value="1" />
		<integer name="sms_type_force" value="1" />
		<integer name="timeout" value="$timeout" />
		<boolean name="budget_is_time" value="true"/>
	</integrator>
	<emitter type="point">
		<transform name="to_world">
			<translate x="-2" y="3" z="4"/>
		</transform>
		<spectrum name="intensity" value="100"/>
        <boolean name="caustic_emitter_single" value="true"/>
        <boolean name="caustic_emitter_multi" value="true"/>
	</emitter>  
	
    <emitter type="envmap">
        <string name="filename" value="textures/sky.exr" />
        <transform name="to_world">
            <rotate y="1" angle="0" />
        </transform>
        <float name="scale" value="1" />
    </emitter>
	
	 <bsdf type="dielectric" id="metal">
            <float name="int_ior" value="1.5" />
            <float name="ext_ior" value="1.0" />
	</bsdf> 
    <shape type="obj">
        <string name="filename" value="../../data/pool20k.obj" />
		<ref id="metal"/>
        <boolean name="caustic_caster_single" value="true"/>
        <boolean name="caustic_caster_multi" value="true"/>
	</shape>
    <shape type="obj">
        <string name="filename" value="meshes/pool_bottom.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/[2K]Tiles06/Tiles06_col.png" />
                <transform name="to_uv">
                    <scale x="20" y="20"/>
                </transform>
            </texture>
        </bsdf>
        <boolean name="caustic_receiver" value="true"/>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/pool_border.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/[2K]Tiles54/Tiles54_col.jpg" />
            </texture>
        </bsdf>
        <boolean name="caustic_receiver" value="true"/>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/floor1.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/[2K]Tiles27/Tiles27_col.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/floor2.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/[2K]Tiles50/Tiles50_col.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/ladder_steps.obj" />
        <bsdf type="roughplastic">
            <string name="distribution" value="ggx" />
            <float name="alpha" value="0.1" />
            <rgb name="diffuse_reflectance" value="0.01, 0.01, 0.04" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/ladder_metal.obj" />
        <bsdf type="roughconductor">
            <string name="distribution" value="ggx" />
            <string name="material" value="Ag" />
            <float name="alpha" value="0.2" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/chairs_wood.obj" />
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.73, 0.58, 0.43" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/chair_fabric_1.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/Striped_cotton_01_2K_Base_Color.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/chair_fabric_2.obj" />
        <bsdf type="diffuse">
            <texture name="reflectance" type="bitmap">
                <string name="filename" value="textures/Striped_cotton_01_2K_Base_Color_2.jpg" />
            </texture>
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/umbrella_base.obj" />
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.25, 0.25, 0.25" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/umbrella_cylinders.obj" />
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.03, 0.03, 0.03" />
        </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/umbrella_top.obj" />
            <bsdf type="diffuse">
                <texture name="reflectance" type="bitmap">
                    <string name="filename" value="textures/siggraph_logo.png" />
                </texture>
            </bsdf>
    </shape>
    <shape type="obj">
        <string name="filename" value="meshes/torus.obj" />
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.8, 0.126, 0.407" />
        </bsdf>
    </shape>
    <sensor type="perspective">
        <float name="fov" value="52" />
		<transform name="to_world">
            <rotate x="0.0" y="1.0" z="0.0" angle="180.00" />
            <rotate x="1.0" y="0.0" z="0.0" angle="-40.48" />
            <rotate x="0.0" y="1.0" z="0.0" angle="72.56" />
            <rotate x="0.0" y="0.0" z="1.0" angle="0.00" />
            <translate x="13.777025" y="12.458819" z="3.740857" />
		</transform>
		<sampler type="independent">
            <integer name="sample_count" value="$spp" />
		</sampler>
		<film type="hdrfilm">
            <integer name="width" value="1280" />
            <integer name="height" value="720" />
            <rfilter type="box" />
	</film>
	</sensor>
</scene>